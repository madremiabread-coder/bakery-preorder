{% extends "base.html" %}
{% block content %}

<!-- ✅ Hero Section (full-width background image with overlay text) -->
<section class="hero-banner">
  <div class="hero-overlay">
    <h1>Welcome to Madre Mia! Bread</h1>
    <p>Small-batch bakes. Big heart. Preorder today!</p>
  </div>
</section>

<!-- ✅ Featured Items Section -->
<div class="container">
  <h2 style="text-align: center; margin-top: 2rem;">Featured Items</h2>

  <!-- ✅ Use global grid + card system -->
  <div id="featured-list" class="grid">
    <!-- Featured products will load dynamically here via JS -->
  </div>

  <!-- Link to all products, centered -->
  <p style="text-align: center; margin-top: 1rem;">
    <a href="/products">See all products →</a>
  </p>
</div>

<script>
  document.addEventListener("DOMContentLoaded", async () => {
    try {
      const res = await fetch("/api/products");
      if (!res.ok) {
        document.querySelector("#featured-list").innerHTML = "<p>Failed to load featured products.</p>";
        return;
      }

      const products = await res.json();
      const featured = products.slice(0, 2); // ✅ take first two items as featured

      const listContainer = document.querySelector("#featured-list");
      listContainer.innerHTML = "";

      featured.forEach(p => {
        const card = document.createElement("div");
        card.classList.add("card"); // ✅ Use global card styling

        // Optional product image
        const imageTag = p.image_url
          ? `<div class="card-media"><img src="${p.image_url}" alt="${p.name}"></div>`
          : "";

        card.innerHTML = `
          ${imageTag}
          <div class="card-body">
            <h3><a href="/product/${p.id}">${p.name}</a></h3>
            <p>${p.description || ""}</p>
            <p class="price">$${(p.price_cents / 100).toFixed(2)}</p>
          </div>
        `;

        listContainer.appendChild(card);
      });
    } catch (err) {
      console.error("Error loading featured products:", err);
      document.querySelector("#featured-list").innerHTML = "<p>Error loading featured products.</p>";
    }
  });
</script>

{% endblock %}





